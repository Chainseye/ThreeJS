<!DOCTYPE html>
<html>
    <head>        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1">
        <title>OBJ Render U</title>

        <link rel="stylesheet" type="text/css" href="../skin/css/base.css" />
    </head>
    <body>
        <div id="counter"></div>
        <script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="../js/three.min.js"></script>
        <script type="text/javascript" src="../js/r78/OBJLoader.js"></script>
        <script type="text/javascript" src="../js/r78/stats.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                var container, stats;
                var camera, scene, renderer;
                var mouseX = 0,
                    mouseY = 0;
                var windowHalfX = window.innerWidth / 2;
                var windowHalfY = window.innerHeight / 2;

                init();
                animate();

                function init() {

                    container = document.createElement('div');
                    document.body.appendChild(container);
                    stats = new Stats();
			        container.appendChild( stats.dom );

                    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 200000);
                    camera.position.z = 20000;

                    // scene
                    scene = new THREE.Scene();

                    var ambient = new THREE.AmbientLight(0x444444);
                    scene.add(ambient);

                    var directionalLight = new THREE.DirectionalLight(0xffeedd);
                    directionalLight.position.set(0, 0, 1).normalize();
                    scene.add(directionalLight);

                    
                    var obj = new THREE.OBJLoader();
                    obj.load("obj/d.obj", function(o) {
                        o.position.y = 0;
                        o.rotation.x = -0.0;
                        o.rotation.y = 0.0;
                        o.rotation.z = 2.42;
                        scene.add(o);
                    })


                    //

                    renderer = new THREE.WebGLRenderer();
                    renderer.setPixelRatio(window.devicePixelRatio);
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    container.appendChild(renderer.domElement);

                    //

                    window.addEventListener('resize', onWindowResize, false);
                    window.addEventListener('wheel', onWindowScroll, false);

                }

                function onWindowResize() {

                    windowHalfX = window.innerWidth / 2;
                    windowHalfY = window.innerHeight / 2;

                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();

                    renderer.setSize(window.innerWidth, window.innerHeight);

                }

                function onWindowScroll(e) {
                        if(e.wheelDelta){//IE/Opera/Chrome 
                            camera.position.z += 2 * e.wheelDelta;
                        }
                }
                

                function animate() {

                    requestAnimationFrame(animate);
                    render();

                }

                function render() {

                    stats.update();
                    
                    camera.lookAt(scene.position);

                    renderer.render(scene, camera);

                }
            });
        </script>
    </body>
</html>